name: AI Summit Registration Watcher

on:
  schedule:
    - cron: "*/15 * * * *"
  workflow_dispatch:

jobs:
  check:
    runs-on: ubuntu-latest

    steps:
      - name: Check AI Summit registration status
        run: |
          PAGE=$(curl -sL https://impact.indiaai.gov.in/registration)

          # When registration is closed, the page shows virtual participation link
          if echo "$PAGE" | grep -qi "impact.indiaai.gov.in/sessions"; then
            echo "Registration still oversubscribed (virtual-only mode)."
            exit 1
          else
            echo "ðŸš€ REGISTRATION OPEN ðŸš€"
          fi
